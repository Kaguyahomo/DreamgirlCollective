<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin â€” Word Bank</title>
    <link rel="stylesheet" href="../styles.css">
</head>

<body>

<header>
    <img src="../header-image.png" class="header-image left">
    <h1>Vocabulary Admin</h1>
    <img src="../header-image.png" class="header-image right">
</header>

<nav>
    <a href="../kaguya.html"><img src="../header-image.png"></a>
    <a href="../vocab/index.html"><img src="../header-image.png"></a>
</nav>

<section>

    <h2>Word Bank Manager</h2>

    <h3>Add New Word</h3>
    <input id="new-word" placeholder="Word">
    <input id="new-definition" placeholder="Definition">
    <button onclick="addWord()">Add Word</button>

    <hr style="margin:2rem 0;">

    <h3>All Words</h3>
    <div id="word-list"></div>

</section>

<script>
const API = "https://renelaird.pages.dev/api";

async function loadWords() {
    const res = await fetch(`${API}/words/all`);
    const data = await res.json();

    let html = "<ul>";
    data.words.forEach(w => {
        html += `
            <li>
                <b>${w.word}</b>: ${w.definition}
                <button onclick="deleteWord('${w.word}')">Delete</button>
            </li>`;
    });
    html += "</ul>";

    document.getElementById("word-list").innerHTML = html;
}

async function addWord() {
    const word = document.getElementById("new-word").value.trim();
    const definition = document.getElementById("new-definition").value.trim();

    if (!word || !definition) return;

    await fetch(`${API}/words/add`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({word, definition})
    });

    loadWords();
}

async function deleteWord(word) {
    await fetch(`${API}/words/delete/${word}`, { method: "DELETE" });
    loadWords();
}

loadWords();
</script>

</body>
</html>
